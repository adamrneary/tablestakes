<!DOCTYPE html>

<html>
<head>
  <title>render.coffee</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page">
            
              
              <a class="source" href="column.html">
                column.coffee
              </a>
            
              
              <a class="source" href="events.html">
                events.coffee
              </a>
            
              
              <a class="source" href="headrow.html">
                headrow.coffee
              </a>
            
              
              <a class="source" href="render.html">
                render.coffee
              </a>
            
              
              <a class="source" href="tablestakes.html">
                tablestakes.coffee
              </a>
            
              
              <a class="source" href="utils.html">
                utils.coffee
              </a>
            
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>render.coffee</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>window.TableStakesLib = {} <span class="keyword">unless</span> window.TableStakesLib
<span class="class"><span class="keyword">class</span> <span class="title">window</span>.<span class="title">TableStakesLib</span>.<span class="title">Core</span></span></pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <h2>Constructor, getter, and setter methods</h2>

            </div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>  
  constructor: (options) -&gt;
    <span class="property">@utils</span> = <span class="keyword">new</span> window.TableStakesLib.Utils
      core: @
    <span class="property">@events</span> = <span class="keyword">new</span> window.TableStakesLib.Events
      core: @

  set: (options) -&gt;
    <span class="property">@table</span> = options.table
    <span class="property">@selection</span> = options.selection
    <span class="property">@data</span> = options.data
    <span class="property">@columns</span> = <span class="property">@table</span>.columns()
    <span class="property">@headRows</span> = <span class="property">@table</span>.headRows()

  update: -&gt;
    <span class="property">@table</span>.isInRender = <span class="literal">true</span>
    <span class="property">@selection</span>.call (selection) =&gt;
      <span class="property">@table</span>.update selection</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <h2>Building the base DOM elements</h2>

            </div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>Responsible for &lt;table&gt; and contents</p>
<p>Calls renderHead() for &lt;thead&gt; and contents
Calls renderBody() for &lt;tbody&gt; and contents</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  render: -&gt;</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>First get your data</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="property">@_buildData</span>()</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>Then build the table itself</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    wrap = d3.select(<span class="property">@table</span>.el())
      .selectAll(<span class="string">"div"</span>)
      .data([[<span class="property">@nodes</span>]])
    wrapEnter = wrap.enter().append(<span class="string">"div"</span>)
    <span class="property">@tableEnter</span> = wrapEnter.append(<span class="string">"table"</span>)
    <span class="property">@tableObject</span> = wrap.select(<span class="string">"table"</span>)
      .classed(<span class="property">@table</span>.tableClassName, <span class="literal">true</span>)</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>Add header and body</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="property">@_renderHead</span>(<span class="property">@tableObject</span>) <span class="keyword">if</span> <span class="property">@table</span>.header
    <span class="property">@_renderBody</span>(<span class="property">@tableObject</span>)</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>Apply table-level config</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="property">@_makeDraggable</span>(<span class="property">@tableObject</span>) <span class="keyword">unless</span> <span class="property">@table</span>.isDraggable() <span class="keyword">is</span> <span class="literal">false</span>
    <span class="property">@_makeDeletable</span>(<span class="property">@tableObject</span>) <span class="keyword">unless</span> <span class="property">@table</span>.isDeletable() <span class="keyword">is</span> <span class="literal">false</span>
    <span class="property">@_makeScrollable</span>(<span class="property">@tableObject</span>) <span class="keyword">if</span> _.isNumber(<span class="property">@table</span>.height())</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>TODO: This method needs documentation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _buildData: -&gt;
    <span class="property">@data</span>[<span class="number">0</span>] = id: <span class="property">@table</span>.noData <span class="keyword">unless</span> <span class="property">@data</span>[<span class="number">0</span>]
    <span class="property">@tree</span> = d3.layout.tree().children (d) -&gt; d.values
    <span class="property">@nodes</span> = <span class="property">@tree</span>.nodes(<span class="property">@data</span>[<span class="number">0</span>])</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p>Calculate number of columns</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    depth = d3.max(<span class="property">@nodes</span>, (node) -&gt; node.depth)
    <span class="property">@tree</span>.size [<span class="property">@table</span>.height, depth * <span class="property">@table</span>.childIndent]</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p>Responsible for &lt;thead&gt; and contents</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _renderHead: (tableObject) -&gt;</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <p>Create table header</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    thead = tableObject.selectAll(<span class="string">'thead'</span>)
      .data((d) -&gt; d)
      .enter()
        .append(<span class="string">'thead'</span>)

    <span class="keyword">if</span> !<span class="property">@headRows</span> <span class="comment"># TODO: What does this line do?</span></pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p>Create table header row</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      theadRow = thead
        .append(<span class="string">"tr"</span>)</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <p>Append a &lt;th&gt; for each column</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      th = theadRow.selectAll(<span class="string">"th"</span>)
        .data(<span class="property">@columns</span>)
        .enter()
          .append(<span class="string">"th"</span>)
            .attr(<span class="string">"ref"</span>, (d,i) -&gt; i)
            .attr(<span class="string">"class"</span>, (d) =&gt; <span class="property">@_columnClasses</span>(d))
            .style(<span class="string">'width'</span>, (d) -&gt; d.width)
            .append(<span class="string">'div'</span>)
              .text((d) -&gt; d.label)
    <span class="keyword">else</span></pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <p>Create table header row</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      theadRow = thead.selectAll(<span class="string">"thead"</span>)
        .data(<span class="property">@headRows</span>)
        .enter()
          .append(<span class="string">"tr"</span>)
            .attr(<span class="string">"class"</span>, (d) -&gt; d.headClasses)</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <p>Append a &lt;th&gt; for each column</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      th = theadRow.selectAll(<span class="string">"th"</span>)
        .data((row, i) -&gt; row.col)
        .enter()
          .append(<span class="string">"th"</span>)
            .attr(<span class="string">"ref"</span>, (d,i) -&gt; i)
            .attr(<span class="string">"class"</span>, (d) =&gt;
              <span class="property">@_columnClasses</span>(d) + <span class="string">' underline'</span>)
            .style(<span class="string">'width'</span>, (d) -&gt; d.width)
            .append(<span class="string">'div'</span>)
              .text((d) -&gt; d.label)</pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <p>Apply header-level config</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    allTh = theadRow
      .filter((d) -&gt; <span class="literal">true</span> <span class="keyword">unless</span> d.headClasses)
      .selectAll(<span class="string">"th"</span>)</pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <p>Individual columns can be made sortable, or all, or none</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    sortable = allTh.filter (d) -&gt; d.isSortable
    <span class="property">@_makeSortable</span>(sortable)</pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <p>For now, either all columns are resizable or none, set in table config</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="property">@_makeResizable</span>(allTh) <span class="keyword">if</span> <span class="property">@table</span>.isResizable() <span class="keyword">and</span> <span class="keyword">not</span> _.isNumber(<span class="property">@table</span>.get(<span class="string">'height'</span>))</pre></div></div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              <p>return @ to make the method chainable (TODO: but why? we can prob delete?)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    @</pre></div></div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-22">&#182;</a>
              </div>
              <p>Responsible for &lt;tbody&gt; and contents</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _renderBody: (tableObject) -&gt;</pre></div></div>
            
        </li>
        
        
        <li id="section-23">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-23">&#182;</a>
              </div>
              <p>render the body itself</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="property">@tbody</span> = tableObject.selectAll(<span class="string">"tbody"</span>).data((d) -&gt; d)
    <span class="property">@tbody</span>.enter().append <span class="string">"tbody"</span></pre></div></div>
            
        </li>
        
        
        <li id="section-24">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-24">&#182;</a>
              </div>
              <p>Create objects that can be chained against for each row</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="property">@rows</span> = <span class="property">@tbody</span>.selectAll(<span class="string">"tr"</span>)
      .data(((d) -&gt; d), (d) -&gt; d.id)
    <span class="property">@_enterRows</span>()
    <span class="property">@_updateRows</span>()
    <span class="property">@_exitRows</span>()</pre></div></div>
            
        </li>
        
        
        <li id="section-25">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-25">&#182;</a>
              </div>
              <p>Hide the first row (TODO: but why?)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    d3.select(<span class="property">@enterRows</span>[<span class="number">0</span>][<span class="number">0</span>])
      .style(<span class="string">"display"</span>, <span class="string">"none"</span>) <span class="keyword">if</span> <span class="property">@enterRows</span>[<span class="number">0</span>][<span class="number">0</span>]</pre></div></div>
            
        </li>
        
        
        <li id="section-26">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-26">&#182;</a>
              </div>
              <p>Now render the rows themselves</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="property">@_renderEnterRows</span>()
    <span class="property">@_renderUpdateRows</span>()</pre></div></div>
            
        </li>
        
        
        <li id="section-27">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-27">&#182;</a>
              </div>
              <p>Creates an object that can be chained against for rows that are entering.</p>
<p>See D3 documentation for the logic behind thinking in joins:
<a href="http://bost.ocks.org/mike/join/">http://bost.ocks.org/mike/join/</a></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _enterRows: -&gt;
    <span class="property">@enterRows</span> = <span class="property">@rows</span>
      .enter()
        .append(<span class="string">"tr"</span>)
        .attr(<span class="string">"class"</span>, (d) =&gt; <span class="property">@_rowClasses</span>(d))</pre></div></div>
            
        </li>
        
        
        <li id="section-28">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-28">&#182;</a>
              </div>
              <p>Creates an object that can be chained against for rows that are being updated.
Per D3 convention, this <em>includes</em> entering and existing rows not exiting.</p>
<p>See D3 documentation for the logic behind thinking in joins:
<a href="http://bost.ocks.org/mike/join/">http://bost.ocks.org/mike/join/</a></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _updateRows: -&gt;
    <span class="property">@updateRows</span> = <span class="property">@rows</span>.order()
    <span class="property">@_addRowEventHandling</span>()
    <span class="property">@updateRows</span>.select(<span class="string">'.expandable'</span>)
      .classed(<span class="string">'folded'</span>, <span class="property">@utils</span>.folded)</pre></div></div>
            
        </li>
        
        
        <li id="section-29">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-29">&#182;</a>
              </div>
              <p>Creates an object that can be chained against for rows that are exiting.</p>
<p>See D3 documentation for the logic behind thinking in joins:
<a href="http://bost.ocks.org/mike/join/">http://bost.ocks.org/mike/join/</a></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _exitRows: -&gt;
    <span class="property">@rows</span>
      .exit()
        .remove()</pre></div></div>
            
        </li>
        
        
        <li id="section-30">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-30">&#182;</a>
              </div>
              <p>This method binds basic event handling at the row level so that methods in
events.coffee can handle them.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _addRowEventHandling: -&gt;
    events =
      click: <span class="string">'elementClick'</span>
      dblclick: <span class="string">'elementDblclick'</span>
      mouseover: <span class="string">'elementMouseover'</span>
      mouseout: <span class="string">'elementMouseout'</span>

    <span class="function"><span class="title">addEvent</span></span> = (key, value) =&gt;
      <span class="property">@updateRows</span>.<span class="literal">on</span> key, (d) =&gt; <span class="property">@table</span>.dispatch.elementClick
        row: @
        data: d
        pos: [d.x, d.y]

    _.each events, (value, key) =&gt; addEvent(key, value)</pre></div></div>
            
        </li>
        
        
        <li id="section-31">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-31">&#182;</a>
              </div>
              <p>Responsible for rendering new rows</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _renderEnterRows: -&gt;
    self = @</pre></div></div>
            
        </li>
        
        
        <li id="section-32">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-32">&#182;</a>
              </div>
              <p>TODO: I am skeptical about the need for this forEach as opposed to using 
a join correctly. Perhaps in the future we will have a D3 maniac at our
disposal who can help with this line.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="property">@columns</span>.forEach (column, column_index) =&gt;</pre></div></div>
            
        </li>
        
        
        <li id="section-33">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-33">&#182;</a>
              </div>
              <p>Determine the text to be included in the cell</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="function"><span class="title">text</span></span> = (d) -&gt;
        <span class="keyword">if</span> column.timeSeries? <span class="keyword">and</span> d.period? <span class="keyword">and</span> d.dataValue?
          index = d.period.indexOf(column.id)
          <span class="keyword">if</span> column.format
            cell = _.clone d
            cell.dataValue = d.dataValue[index]
            column.format cell, column
          <span class="keyword">else</span>
            d.dataValue[index]
        <span class="keyword">else</span> <span class="keyword">if</span> column.format
          column.format d, column
        <span class="keyword">else</span>
          d[column.id] <span class="keyword">or</span> <span class="string">'-'</span>

      <span class="property">@enterRows</span>.append(<span class="string">'td'</span>)</pre></div></div>
            
        </li>
        
        
        <li id="section-34">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-34">&#182;</a>
              </div>
              <p>add cell classes</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        .attr(<span class="string">'class'</span>, (d) =&gt; <span class="property">@_cellClasses</span>(d, column))</pre></div></div>
            
        </li>
        
        
        <li id="section-35">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-35">&#182;</a>
              </div>
              <p>add a column id</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        .attr(<span class="string">'meta-key'</span>, column.id)</pre></div></div>
            
        </li>
        
        
        <li id="section-36">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-36">&#182;</a>
              </div>
              <p>include text in a div due to IE problems</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        .append(<span class="string">'div'</span>) 
          .html(text).each (d, i) -&gt;</pre></div></div>
            
        </li>
        
        
        <li id="section-37">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-37">&#182;</a>
              </div>
              <p>TODO: Do we really need this? I believe _renderUpdateRows
achieves this for every cell, including entering cells</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            self._renderCell(column, d, @)</pre></div></div>
            
        </li>
        
        
        <li id="section-38">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-38">&#182;</a>
              </div>
              <p>Responsible for updating existing rows</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _renderUpdateRows: -&gt;
    self = @
    <span class="property">@updateRows</span>.selectAll(<span class="string">'div'</span>).each (d, i) -&gt;
      self._renderCell(self.columns[i], d, @) <span class="keyword">if</span> self.columns[i]?</pre></div></div>
            
        </li>
        
        
        <li id="section-39">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-39">&#182;</a>
              </div>
              <p>Responsible for rendering the cell itself (finally!)</p>
<p>Note: At this point, the text of the cell is already populated. Here we&#39;re
more concerned with classes and behaviors</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _renderCell: (column, d, div) -&gt;
    isEditable = <span class="property">@utils</span>.ourFunctor(column.isEditable, d, column)
    <span class="property">@_makeNested</span>(div) <span class="keyword">if</span> <span class="property">@utils</span>.ourFunctor(column.isNested, d)
    <span class="property">@_makeEditable</span>(d, div, column) <span class="keyword">if</span> isEditable
    <span class="property">@_makeChanged</span>(d, div, column)
    <span class="property">@_makeBoolean</span>(d, div, column) <span class="keyword">if</span> column.editor <span class="keyword">is</span> <span class="string">'boolean'</span> <span class="keyword">and</span> isEditable
    <span class="property">@_makeSelect</span>(d, div, column) <span class="keyword">if</span> column.editor <span class="keyword">is</span> <span class="string">'select'</span> <span class="keyword">and</span> isEditable
    <span class="property">@_makeButton</span>(d, div, column) <span class="keyword">if</span> column.editor <span class="keyword">is</span> <span class="string">'button'</span> <span class="keyword">and</span> isEditable
    <span class="property">@_addShowCount</span>(d, div, column) <span class="keyword">if</span> column.showCount</pre></div></div>
            
        </li>
        
        
        <li id="section-40">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-40">&#182;</a>
              </div>
              <h2>&quot;Class methods&quot; (tongue in cheek) define classes to be applied to tags</h2>

            </div>
            
        </li>
        
        
        <li id="section-41">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-41">&#182;</a>
              </div>
              <p>Note: There are other methods that add/remove classes but these are the
primary points of contact</p>
<p>Responsible for &lt;th&gt; classes
functions in column classes only to &lt;td&gt; nodes below,
not &lt;th&gt; nodes</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _columnClasses: (column) -&gt;
    <span class="keyword">if</span> _.isFunction(column.classes)
      column.classes({}, column) || <span class="string">''</span>
    <span class="keyword">else</span>
      column.classes || <span class="string">''</span></pre></div></div>
            
        </li>
        
        
        <li id="section-42">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-42">&#182;</a>
              </div>
              <p>Responsible for &lt;tr&gt; classes
functions in column classes only to &lt;td&gt; nodes below,
not &lt;th&gt; nodes</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _rowClasses: (d) -&gt;
    <span class="property">@table</span>.rowClasses()(d) <span class="keyword">if</span> <span class="property">@table</span>.rowClasses()?</pre></div></div>
            
        </li>
        
        
        <li id="section-43">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-43">&#182;</a>
              </div>
              <p>Responsible for &lt;td&gt; classes
functions in column classes only to &lt;td&gt; nodes below,
not &lt;th&gt; nodes</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _cellClasses: (d, column) -&gt;
    val = []</pre></div></div>
            
        </li>
        
        
        <li id="section-44">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-44">&#182;</a>
              </div>
              <p>Retrieve classes specific to the column</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    val.push <span class="keyword">if</span> column.classes?
      <span class="keyword">if</span> <span class="keyword">typeof</span> column.classes <span class="keyword">is</span> <span class="string">'function'</span>
        column.classes(d, column)
      <span class="keyword">else</span>
        column.classes

    val.push <span class="property">@utils</span>.nestedIcons(d) <span class="keyword">if</span> column.isNested</pre></div></div>
            
        </li>
        
        
        <li id="section-45">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-45">&#182;</a>
              </div>
              <p>Retrieve classes specified in data itself</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    val.push d.classes <span class="keyword">if</span> d.classes?</pre></div></div>
            
        </li>
        
        
        <li id="section-46">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-46">&#182;</a>
              </div>
              <p>Return string split by spaces</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    val.join(<span class="string">' '</span>)</pre></div></div>
            
        </li>
        
        
        <li id="section-47">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-47">&#182;</a>
              </div>
              <h2>&quot;Transform methods&quot; apply optional behaviors and classes based on config</h2>

            </div>
            
        </li>
        
        
        <li id="section-48">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-48">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-49">
            <div class="annotation">
              
              <div class="pilwrap for-h1">
                <a class="pilcrow" href="#section-49">&#182;</a>
              </div>
              <h1>Table-level transform methods</h1>

            </div>
            
        </li>
        
        
        <li id="section-50">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-50">&#182;</a>
              </div>
              <p>TODO: this method needs documentation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _makeDraggable: (table) -&gt;
    self = @</pre></div></div>
            
        </li>
        
        
        <li id="section-51">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-51">&#182;</a>
              </div>
              <p>add space in the table header</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">if</span> table.selectAll(<span class="string">'th.draggable-head'</span>)[<span class="number">0</span>].length <span class="keyword">is</span> <span class="number">0</span>
      table.selectAll(<span class="string">"thead tr"</span>)
        .append(<span class="string">'th'</span>)
          .attr(<span class="string">'width'</span>, <span class="string">'15px'</span>)
          .classed(<span class="string">'draggable-head'</span>, <span class="literal">true</span>)</pre></div></div>
            
        </li>
        
        
        <li id="section-52">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-52">&#182;</a>
              </div>
              <p>add draggable &lt;td&gt;</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="property">@enterRows</span>.append(<span class="string">'td'</span>)
      .classed(<span class="string">'draggable'</span>, (d) =&gt; <span class="property">@utils</span>.ourFunctor(<span class="property">@table</span>.isDraggable(), d))
      .append(<span class="string">'div'</span>)

    <span class="property">@updateRows</span>.selectAll(<span class="string">'td.draggable'</span>).<span class="literal">on</span> <span class="string">'mouseover'</span>, (d) -&gt;
      self._setDragBehavior()
    .<span class="literal">on</span> <span class="string">'mouseout'</span>, (d) -&gt;
      self._clearDragBehavior()</pre></div></div>
            
        </li>
        
        
        <li id="section-53">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-53">&#182;</a>
              </div>
              <p>TODO: this method needs documentation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _setDragBehavior: -&gt;
    self = @
    dragBehavior = d3.behavior.drag()
      .origin(Object)
      .<span class="literal">on</span>(<span class="string">'dragstart'</span>, (d, x, y) -&gt; self.events.dragStart(@, d, x, y))
      .<span class="literal">on</span>(<span class="string">'drag'</span>,      (d, x, y) -&gt; self.events.dragMove(@, d, x, y))
      .<span class="literal">on</span>(<span class="string">'dragend'</span>,   (d, x, y) -&gt; self.events.dragEnd(@, d, x, y))
    <span class="property">@updateRows</span>.call dragBehavior</pre></div></div>
            
        </li>
        
        
        <li id="section-54">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-54">&#182;</a>
              </div>
              <p>TODO: this method needs documentation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _clearDragBehavior: -&gt;
    self = @
    dragBehavior = d3.behavior.drag()
      .origin(Object)
      .<span class="literal">on</span>(<span class="string">'dragstart'</span>, <span class="literal">null</span>)
      .<span class="literal">on</span>(<span class="string">'drag'</span>, <span class="literal">null</span>)
      .<span class="literal">on</span>(<span class="string">'dragend'</span>, <span class="literal">null</span>)
    <span class="property">@updateRows</span>.call dragBehavior</pre></div></div>
            
        </li>
        
        
        <li id="section-55">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-55">&#182;</a>
              </div>
              <p>TODO: this method needs documentation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _makeDeletable: (table) -&gt;</pre></div></div>
            
        </li>
        
        
        <li id="section-56">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-56">&#182;</a>
              </div>
              <p>add space in the table header</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">if</span> table.selectAll(<span class="string">'th.deletable-head'</span>)[<span class="number">0</span>].length <span class="keyword">is</span> <span class="number">0</span>
      table.selectAll(<span class="string">"thead tr"</span>)
        .append(<span class="string">'th'</span>)
          .attr(<span class="string">'width'</span>, <span class="string">'15px'</span>)
          .classed(<span class="string">'deletable-head'</span>, <span class="literal">true</span>)</pre></div></div>
            
        </li>
        
        
        <li id="section-57">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-57">&#182;</a>
              </div>
              <p>add deletable &lt;td&gt;</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="property">@enterRows</span>.append(<span class="string">'td'</span>)
      .classed(<span class="string">'deletable'</span>, (d) =&gt; <span class="property">@utils</span>.ourFunctor(<span class="property">@table</span>.isDeletable(), d))
      .append(<span class="string">'div'</span>)
        .<span class="literal">on</span> <span class="string">'click'</span>,
          (d) =&gt;
            <span class="property">@table</span>.onDelete()(d.id) <span class="keyword">if</span> <span class="property">@utils</span>.ourFunctor(<span class="property">@table</span>.isDeletable(), d)</pre></div></div>
            
        </li>
        
        
        <li id="section-58">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-58">&#182;</a>
              </div>
              <p>TODO: this method needs documentation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _makeResizable: (allTd) =&gt;</pre></div></div>
            
        </li>
        
        
        <li id="section-59">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-59">&#182;</a>
              </div>
              <p>todo: clean up contexts</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    self = @
    length = _.size(allTd[<span class="number">0</span>])

    dragBehavior = d3.behavior.drag()
      .<span class="literal">on</span>(<span class="string">"drag"</span>, -&gt; self.events.resizeDrag(@))

    allTd.classed(<span class="string">'resizable'</span>,<span class="literal">true</span>)

    first = allTd.filter((d, i) -&gt; i &gt; <span class="number">0</span>).selectAll(<span class="string">"div"</span>)
    last = allTd.filter((d, i) -&gt; i+<span class="number">1</span> &lt; length).selectAll(<span class="string">"div"</span>)

    first.insert(<span class="string">"div"</span>)
      .classed(<span class="string">"resizable-handle"</span>, <span class="literal">true</span>)
      .classed(<span class="string">"left"</span>, <span class="literal">true</span>)
      .call dragBehavior

    last.append(<span class="string">"div"</span>)
      .classed(<span class="string">'resizable-handle'</span>, <span class="literal">true</span>)
      .classed(<span class="string">'right'</span>, <span class="literal">true</span>)
      .call dragBehavior</pre></div></div>
            
        </li>
        
        
        <li id="section-60">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-60">&#182;</a>
              </div>
              <p>TODO: this method needs documentation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _makeSortable: (allTd)-&gt;
    self = @

    allTd.classed(<span class="string">'sortable'</span>,<span class="literal">true</span>)
      .append(<span class="string">"div"</span>)
        .classed(<span class="string">'sortable-handle'</span>, <span class="literal">true</span>)

    sorted = allTd.filter (column)-&gt;
      column.asc?
    <span class="keyword">if</span> sorted[<span class="number">0</span>] <span class="keyword">and</span> sorted[<span class="number">0</span>].length &gt; <span class="number">0</span>
      asc = sorted.data()[<span class="number">0</span>].asc
      sorted.classed(<span class="string">'sorted-asc'</span>,asc)
      sorted.classed(<span class="string">'sorted-desc'</span>,!asc)
    allTd.<span class="literal">on</span> <span class="string">'click'</span>, (a,b,c)-&gt;
      self.events.toggleSort @,a,b,c

  _makeScrollable: (tableObject)-&gt;</pre></div></div>
            
        </li>
        
        
        <li id="section-61">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-61">&#182;</a>
              </div>
              <p>set width attr to thead &gt; td, th</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _.each($(<span class="string">'.tablestakes thead td'</span>), (d) -&gt;
      $(d).width($(d).width()))
    _.each($(<span class="string">'.tablestakes thead th'</span>), (d) -&gt;
      $(d).width($(d).width()))</pre></div></div>
            
        </li>
        
        
        <li id="section-62">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-62">&#182;</a>
              </div>
              <p>set width attr to tbody &gt; td, th</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _.each($(<span class="string">'.tablestakes tbody td'</span>), (d) -&gt;
      $(d).width($(d).width()))
    _.each($(<span class="string">'.tablestakes tbody th'</span>), (d) -&gt;
      $(d).width($(d).width()))

    tableObject.classed(<span class="string">"scrollable"</span>, <span class="literal">true</span>)
    tableObject.select(<span class="string">'tbody'</span>).style(<span class="string">"height"</span>, <span class="string">"<span class="subst">#{@table.height()}</span>px"</span>)
    <span class="property">@table</span>.isResizable(<span class="literal">false</span>)</pre></div></div>
            
        </li>
        
        
        <li id="section-63">
            <div class="annotation">
              
              <div class="pilwrap for-h1">
                <a class="pilcrow" href="#section-63">&#182;</a>
              </div>
              <h1>Cell-level transform methods</h1>

            </div>
            
        </li>
        
        
        <li id="section-64">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-64">&#182;</a>
              </div>
              <p>TODO: this method needs documentation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _makeNested: (div) -&gt;
    d3.select(div.parentNode).classed(<span class="string">'collapsible'</span>, <span class="literal">false</span>)
    d3.select(div.parentNode).classed(<span class="string">'expandable'</span>, <span class="literal">false</span>)
    appliedClasses = d3.select(div.parentNode).attr(<span class="string">'class'</span>)
    d3.select(div.parentNode)
      .attr(<span class="string">'class'</span>, (d) =&gt;
        appliedClasses += <span class="string">' '</span> + <span class="property">@utils</span>.nestedIcons(d)
        _.uniq(appliedClasses.split(<span class="string">' '</span>)).join(<span class="string">' '</span>)
      )
      .<span class="literal">on</span>(<span class="string">'click'</span>, (a,b,c) =&gt; <span class="property">@events</span>.nestedClick(@,a,b,c))</pre></div></div>
            
        </li>
        
        
        <li id="section-65">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-65">&#182;</a>
              </div>
              <p>TODO: this method needs documentation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _makeEditable: (d, div, column) -&gt;
    self = @

    <span class="keyword">return</span> <span class="keyword">if</span> _.contains [<span class="string">'boolean'</span>, <span class="string">'select'</span>], column.editor
    d3.select(div.parentNode).classed(<span class="string">'editable'</span>, <span class="literal">true</span>)
    d3.select(div.parentNode).classed(<span class="string">'calendar'</span>, <span class="literal">true</span>) <span class="keyword">if</span> column.editor <span class="keyword">is</span> <span class="string">'calendar'</span></pre></div></div>
            
        </li>
        
        
        <li id="section-66">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-66">&#182;</a>
              </div>
              <p>TODO: enable datepicker
$(&#39;.editable.calendar&#39;).datepicker()</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="keyword">if</span> d.changed <span class="keyword">is</span> column.id
      d3.select(div.parentNode).classed(<span class="string">'changed'</span>, <span class="literal">true</span>)

    agent = navigator.userAgent.toLowerCase()
    <span class="keyword">if</span> agent.indexOf(<span class="string">'iphone'</span>) &gt;= <span class="number">0</span> <span class="keyword">or</span> agent.indexOf(<span class="string">'ipad'</span>) &gt;= <span class="number">0</span>
      eventType = <span class="string">'touchend'</span>
      d3.select(div)
        .<span class="literal">on</span>(eventType, (a,b,c) -&gt; self.events.doubleTap(@,a,b,c,column))
    <span class="keyword">else</span>
      eventType = <span class="string">'dblclick'</span>
      d3.select(div)
        .<span class="literal">on</span>(eventType, (a,b,c) -&gt; self.events.editableClick(@,a,b,c,column))

    <span class="keyword">if</span> d.activatedID <span class="keyword">is</span> column.id.toString()
      <span class="property">@_makeActive</span>(d, div, column)
    <span class="keyword">else</span>
      <span class="property">@_makeInactive</span>(div)</pre></div></div>
            
        </li>
        
        
        <li id="section-67">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-67">&#182;</a>
              </div>
              <p>TODO: this method needs documentation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _makeActive: (d, div, column) -&gt;
    self = @

    <span class="function"><span class="title">getValue</span></span> = (d) -&gt;
      <span class="keyword">if</span> column.timeSeries
        <span class="keyword">if</span> d.dataValue <span class="keyword">and</span> d.period
          index = d.period.indexOf(column.id)
          cell = _.clone d
          cell.dataValue = d.dataValue[index]
          cell
        <span class="keyword">else</span>
          <span class="string">""</span>
      <span class="keyword">else</span>
        d

    <span class="function"><span class="title">getFormattedValue</span></span> = (d) -&gt;
      value = d.dataValue || d[column.id]
      formattedValue = <span class="keyword">if</span> column.format
        column.format(d, column)
      <span class="keyword">else</span>
        <span class="keyword">if</span> column.timeSeries <span class="keyword">then</span> d.dataValue <span class="keyword">else</span> d[column.id]</pre></div></div>
            
        </li>
        
        
        <li id="section-68">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-68">&#182;</a>
              </div>
              <p>parse formattedValue for numeral().format(&#39;$0.[00]a&#39;)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="keyword">if</span> _.last(formattedValue) <span class="keyword">in</span> [<span class="string">"k"</span>, <span class="string">"b"</span>, <span class="string">"m"</span>, <span class="string">"t"</span>, <span class="string">"K"</span>, <span class="string">"B"</span>, <span class="string">"M"</span>, <span class="string">"T"</span>]
        value
      <span class="keyword">else</span>
        formattedValue

    <span class="function"><span class="title">_text</span></span> = (d) -&gt;
      value = getValue(d)
      getFormattedValue(value)</pre></div></div>
            
        </li>
        
        
        <li id="section-69">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-69">&#182;</a>
              </div>
              <p>TODO: handle .calendar input</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    d3.select(div.parentNode).classed(<span class="string">'active'</span>, <span class="literal">true</span>)
    d3.select(div)
      .text(_text)
      .attr(<span class="string">'contentEditable'</span>, <span class="literal">true</span>)
      .<span class="literal">on</span>(<span class="string">'keydown'</span>, (d) -&gt; self.events.keydown(<span class="keyword">this</span>, d, column))
      .<span class="literal">on</span>(<span class="string">'blur'</span>, (d) -&gt; self.events.blur(<span class="keyword">this</span>, d, column))
      .node()
        .focus()</pre></div></div>
            
        </li>
        
        
        <li id="section-70">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-70">&#182;</a>
              </div>
              <p>TODO: this method needs documentation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _makeInactive: (node) -&gt;
    self = @
    d3.select(node.parentNode)
      .classed(<span class="string">'active'</span>, <span class="literal">false</span>)
    d3.select(node)
      .attr(<span class="string">'contentEditable'</span>, <span class="literal">false</span>)</pre></div></div>
            
        </li>
        
        
        <li id="section-71">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-71">&#182;</a>
              </div>
              <p>TODO: this method needs documentation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _makeChanged: (d, div, column) -&gt;
    <span class="keyword">if</span> d.changedID <span class="keyword">and</span> (i = d.changedID.indexOf(column.id)) <span class="keyword">isnt</span> -<span class="number">1</span>
      d.changedID.splice i, <span class="number">1</span></pre></div></div>
            
        </li>
        
        
        <li id="section-72">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-72">&#182;</a>
              </div>
              <p>TODO: this method needs documentation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _makeSelect: (d, div, column) -&gt;
    options = <span class="property">@utils</span>.ourFunctor(column.selectOptions, d)
    d3.select(div.parentNode)
      .classed(<span class="string">"select"</span>, <span class="literal">true</span>)

    select = d3.select(div)
      .html(<span class="string">'&lt;select class="expand-select"&gt;&lt;/select&gt;'</span>)
      .select(<span class="string">'.expand-select'</span>)</pre></div></div>
            
        </li>
        
        
        <li id="section-73">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-73">&#182;</a>
              </div>
              <p>add current value</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    select.append(<span class="string">'option'</span>)
      .style(<span class="string">'cursor'</span>, <span class="string">'pointer'</span>)
      .text(d[column.id])</pre></div></div>
            
        </li>
        
        
        <li id="section-74">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-74">&#182;</a>
              </div>
              <p>add other options</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    group = select.append(<span class="string">'optgroup'</span>).style(<span class="string">'cursor'</span>, <span class="string">'pointer'</span>)
    _.each _.without(options, d[column.id]), (item) =&gt;
      group.append(<span class="string">'option'</span>)
        .style(<span class="string">'cursor'</span>, <span class="string">'pointer'</span>)
        .text(item)

    select.<span class="literal">on</span>(<span class="string">'change'</span>, (a, b, c) =&gt; <span class="property">@events</span>.selectClick(@, a, b, c, column))</pre></div></div>
            
        </li>
        
        
        <li id="section-75">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-75">&#182;</a>
              </div>
              <p>TODO: this method needs documentation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _makeButton: (d, div, column) -&gt;
    classes = <span class="string">'btn btn-mini btn-primary'</span>
    html = <span class="string">"&lt;input type='button' value='<span class="subst">#{column.label}</span>' class='<span class="subst">#{classes}</span>' /&gt;"</span>
    select = d3.select(div)
      .html(html)
      .<span class="literal">on</span>(<span class="string">'click'</span>, (a, b, c) =&gt; <span class="property">@events</span>.buttonClick(@, a, b, c, column))</pre></div></div>
            
        </li>
        
        
        <li id="section-76">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-76">&#182;</a>
              </div>
              <p>TODO: this method needs documentation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _makeBoolean: (d, div, column) -&gt;
    d3.select(div.parentNode)
      .classed(<span class="string">'boolean-true'</span>, d[column.id])
      .classed(<span class="string">'boolean-false'</span>, <span class="keyword">not</span> d[column.id])
      .<span class="literal">on</span>(<span class="string">'click'</span>, (a, b, c) =&gt; <span class="property">@events</span>.toggleBoolean(@, a, b, c, column))</pre></div></div>
            
        </li>
        
        
        <li id="section-77">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-77">&#182;</a>
              </div>
              <p>TODO: this method needs documentation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _addShowCount: (d, div, column) -&gt;
    count = d.values?.length <span class="keyword">or</span> d._values?.length
    d3.select(div).append(<span class="string">'span'</span>)
      .classed(<span class="string">'childrenCount'</span>, <span class="literal">true</span>)
      .text (d) -&gt; <span class="keyword">if</span> count <span class="keyword">then</span> <span class="string">'('</span> + count + <span class="string">')'</span> <span class="keyword">else</span> <span class="string">''</span></pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
