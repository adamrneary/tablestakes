// Generated by CoffeeScript 1.4.0
var account, categories, columns, data, editHandler, grid, isComplete;

data = [
  {
    id: "task 1",
    category: "engineering",
    type: 'category'
  }, {
    id: "task 2",
    category: "qa",
    type: 'category'
  }, {
    id: "task 3",
    category: "engineering",
    type: 'category'
  }, {
    id: "task 4",
    category: "qa",
    type: 'category'
  }, {
    id: "task 5",
    category: "engineering",
    type: 'category'
  }, {
    id: "task 6",
    category: "qa",
    type: 'category'
  }, {
    id: "task 7",
    category: "design",
    type: 'category'
  }, {
    id: "task 8",
    category: "design",
    type: 'category'
  }, {
    id: "task 9",
    category: "sales & ecommerce",
    type: 'account'
  }, {
    id: "task 10",
    category: "other",
    type: 'account'
  }
];

categories = ['engineering', 'design', 'qa'];

account = ['sales & ecommerce', 'other'];

editHandler = function(id, field, newValue) {
  var row, _i, _len;
  for (_i = 0, _len = data.length; _i < _len; _i++) {
    row = data[_i];
    if (row.id === id) {
      row[field] = newValue;
    }
  }
  return grid.data(data).render();
};

isComplete = function(d) {
  return d.complete;
};

columns = [
  {
    id: "id",
    label: "Task",
    classes: "row-heading"
  }, {
    id: "category",
    label: "Task category / Account",
    isEditable: true,
    editor: 'select',
    selectOptions: function(d) {
      if (d.type === 'category') {
        return categories;
      } else {
        return account;
      }
    },
    onEdit: editHandler
  }
];

grid = new window.TableStakes().el("#example").columns(columns).data(data).render();
