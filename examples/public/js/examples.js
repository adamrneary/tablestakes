// Generated by CoffeeScript 1.4.0
var columns, core, data, grid, prepareLinks, showcaseObject;

core = [
  {
    shortLink: "base",
    title: "Base example"
  }, {
    shortLink: "editable",
    title: "Editable"
  }, {
    shortLink: "nested",
    title: "Nested"
  }, {
    shortLink: "filterable",
    title: "Filterable"
  }, {
    shortLink: "add-and-delete",
    title: "Add and delete"
  }, {
    shortLink: "resizable",
    title: "Resizable"
  }, {
    shortLink: "hierarchy_dragging",
    title: "Hierarchy dragging"
  }, {
    shortLink: "reorder_dragging",
    title: "Reorder dragging"
  }, {
    shortLink: "all",
    title: "All functions"
  }
];

showcaseObject = {
  routes: {}
};

prepareLinks = function(route, el) {
  var link;
  link = $("<a>").attr("href", "/#" + route.shortLink).text(route.title);
  el.append($("<li>").append(link));
  showcaseObject.routes[route.shortLink] = route.shortLink;
  return showcaseObject[route.shortLink] = function() {
    var script, url;
    $("#example_header").text(route.title);
    url = "js/" + route.shortLink + ".js";
    script = $("<script>").attr("src", url);
    $("#example_view").empty().append(script);
    console.log('url', url);
    $.get(url, function(data) {
      $("#example_js").text(data);
      $('.example').hide();
      eval(data);
      $(this).removeClass("rainbow");
      return Rainbow.color();
    });
    return Rainbow.color();
  };
};

$(document).ready(function() {
  var Showcase, showcase;
  _.map(core, function(route) {
    return prepareLinks(route, $("#coreLinkList"));
  });
  Showcase = Backbone.Router.extend(showcaseObject);
  showcase = new Showcase();
  Backbone.history.start();
  if (!window.location.hash) {
    return showcase.navigate("/#base");
  }
});

data = [
  {
    key: "NVD3",
    type: "ahaha"
  }, {
    key: "Simple Line",
    type: "Historical"
  }, {
    key: "Scatter / Bubble",
    type: "Snapshot"
  }, {
    key: "Stacked / Stream / Expanded Area",
    type: "Historical"
  }, {
    key: "Discrete Bar",
    type: "Snapshot"
  }, {
    key: "Grouped / Stacked Multi-Bar",
    type: "Snapshot / Historical"
  }, {
    key: "Horizontal Grouped Bar",
    type: "Snapshot"
  }, {
    key: "Line and Bar Combo",
    type: "Historical"
  }, {
    key: "Cumulative Line",
    type: "Historical"
  }, {
    key: "Line with View Finder",
    type: "Historical"
  }, {
    key: "Legend",
    type: "Universal"
  }, {
    key: "New Root",
    type: "tatata"
  }, {
    key: "1",
    type: "123",
    "class": "total"
  }
];

columns = [
  {
    key: "key",
    label: "Name",
    showCount: false,
    width: "400px",
    type: "text",
    isEditable: true,
    classes: "row-heading",
    click: function(d) {
      return d3.select(this).html("hallo you were clicked");
    }
  }, {
    key: "type",
    label: "Type",
    width: "300px",
    type: "text",
    isEditable: false
  }
];

grid = new window.TablesStakes({
  columns: columns,
  data: data,
  el: "#base"
});

grid.render();

$("#base").show();
